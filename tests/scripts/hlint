#! /usr/bin/env nix-shell
#! nix-shell -p bash haskellPackages.hlint -i bash

# Run hlint on (almost) everything in ~/Programming/Haskell

function hs {
    my_haskell
    for FILE in ~/Programming/Haskell/*.hs ~/Programming/Haskell/*.lhs
    do
        echo "$FILE"
    done
}

ERR=0
while IFS= read -r HASKELL
do
    hlint -XNoCPP "$HASKELL" || ERR=1
done < <(hs)

exit "$ERR"
