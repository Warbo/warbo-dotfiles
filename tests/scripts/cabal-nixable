#!/usr/bin/env bash

ERR=1
while read -r DIR
do
    for CABAL in "$DIR"/*.cabal
    do
        [[ -x "$CABAL" ]]
        cd "$DIR"
        hsConfig || { echo "Can't hsConfig in '$DIR'" >> /dev/stderr; ERR=1; }
    done
done < <(my_haskell)

exit "$ERR"
